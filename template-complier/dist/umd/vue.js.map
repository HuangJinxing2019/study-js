{"version":3,"file":"vue.js","sources":["../../../data_observe/modules/vue/defineReactive.js","../../../data_observe/modules/vue/observeArray.js","../../../data_observe/modules/vue/Observer.js","../../../data_observe/modules/vue/observe.js","../../../data_observe/modules/vue/array.js","../../src/utils.js","../../../MVVM_SIMPLE/MVVM/shared/index.js","../../src/observer/array.js","../../src/observer/index.js","../../src/state.js","../../src/compiler/astParser.js","../../src/compiler/index.js","../../src/init.js","../../src/index.js"],"sourcesContent":["import {observe} from \"./observe\";\r\n\r\nexport function defineReactive(target, key, value){\r\n  observe(value)\r\n  Object.defineProperty(target, key, {\r\n    get(){\r\n      console.log('获取属性key:' + key + ' 值为：'+ value)\r\n      return value\r\n    },\r\n    set(val){\r\n      console.log('设置属性key:' + key + ' 值为：'+ val)\r\n      observe(val)\r\n      value = val\r\n    }\r\n\r\n  })\r\n}","import {observe} from \"./observe\";\r\n\r\nexport function observeArray(arr){\r\n  for(let item of arr){\r\n    observe(item);\r\n  }\r\n}","import {defineReactive} from \"./defineReactive\";\r\nimport arrMethods from \"./array\";\r\nimport {observeArray} from \"./observeArray\";\r\n\r\nexport function Observer(data){\r\n   if(Array.isArray(data)){\r\n     observeArray(data)\r\n    data.__proto__ = arrMethods\r\n   } else {\r\n     this.walk(data)\r\n   }\r\n}\r\n\r\nObserver.prototype.walk = function (data){\r\n  for (let key in data){\r\n    if(Object.hasOwn(data, key)){\r\n      defineReactive(data, key, data[key])\r\n    }\r\n  }\r\n}","import {Observer} from \"./Observer\";\r\n\r\nexport function observe(data){\r\n  if(typeof data !== 'object' || data === null) return\r\n  new Observer(data)\r\n}","import {observe} from \"./observe\";\r\nimport {observeArray} from \"./observeArray\";\r\n\r\nconst arrPrototype = Array.prototype,\r\n      arrMethods = Object.create(arrPrototype);\r\nlet arrProto = [\r\n  'push',\r\n  'pop',\r\n  'shift',\r\n  'unshift',\r\n  'sort',\r\n  'splice',\r\n  'reverse',\r\n]\r\narrProto.map(m => {\r\n  arrMethods[m] = function (){\r\n    console.log('拦截了数组的方法')\r\n    const args = Array.prototype.slice.call(arguments),\r\n          rt = arrPrototype[m].apply(this, args);\r\n    let newArr;\r\n    switch (m){\r\n      case 'push':\r\n      case 'shift':\r\n        newArr = args\r\n        break;\r\n      case 'splice':\r\n          newArr = args.slice(2)\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    if(newArr) observeArray(newArr)\r\n    return rt\r\n  }\r\n})\r\n\r\nexport default arrMethods","import array from \"../../data_observe/modules/vue/array\";\r\n\r\nexport function proxy(target, sourceKey, key){\r\n  Object.defineProperty(target, key, {\r\n    get(){\r\n      return target[sourceKey][key]\r\n    },\r\n    set(val){\r\n      if(target[sourceKey][key] === val) return;\r\n      target[sourceKey][key] = val\r\n    }\r\n  })\r\n}\r\n\r\nexport function isObject(value){\r\n  return typeof value === 'object' && value !== null\r\n}\r\nexport function setConstantProperty(data, key, value){\r\n  Object.defineProperty(data, key, {\r\n    enumerable: false,\r\n    configurable: false,\r\n    value\r\n  })\r\n}\r\n\r\nexport function isArray(value){\r\n  return Array.isArray(value)\r\n}","const reg_check_str = /^[\\'|\\\"].*?[\\\"|\\']/;\r\nconst reg_str = /[\\'|\\\"]/g\r\nexport const isObject = function (data){\r\n  return typeof data === 'object' && data !== null\r\n}\r\nexport const randomNum = () => {\r\n  return parseInt(new Date().getTime() + Math.random() * 1000)\r\n}\r\nexport const hasOwnProperty = (target, key) => {\r\n  return Object.hasOwn(target, key)\r\n}\r\nexport const isEqual = (value, oldValue) => {\r\n  return value === oldValue;\r\n}\r\nexport const checkType = (str) => {\r\n  let isStr = reg_check_str.test(str);\r\n  if(isStr){\r\n    return str.replace(reg_str, '');\r\n  }\r\n  switch (str){\r\n    case 'true':\r\n      return true\r\n    case 'false':\r\n      return false\r\n    default:\r\n      break;\r\n  }\r\n  return Number(str)\r\n}","const arrPrototype = Array.prototype,\r\n      arrMethods = Object.create(arrPrototype);\r\nconst arrProtoMethods = [\r\n  'push',\r\n  'pop',\r\n  'shift',\r\n  'unshift',\r\n  'sort',\r\n  'splice',\r\n  'reverse'\r\n]\r\narrProtoMethods.map(m => {\r\n  arrMethods[m] = function (...args){\r\n\r\n    const result = arrPrototype[m].apply(this, args),\r\n          ob = this.__ob__;\r\n    let newArr;\r\n    switch (m){\r\n      case 'push':\r\n      case 'unshift':\r\n        console.log(`数组方法拦截push/unshift：${args}`)\r\n        newArr = args;\r\n        break;\r\n      case 'splice':\r\n        console.log(`数组方法拦截slice：${args}`)\r\n        newArr = args.slice(2)\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    if(newArr) ob.observeArr(newArr);\r\n    return result;\r\n  }\r\n})\r\nexport {\r\n  arrMethods\r\n}","import {isObject} from \"../../../MVVM_SIMPLE/MVVM/shared\";\r\nimport {setConstantProperty, isArray} from \"../utils\";\r\nimport {arrMethods} from \"./array\";\r\n\r\nclass Observer{\r\n  constructor(data) {\r\n    setConstantProperty(data, '__ob__', this)\r\n    if(isArray(data)){\r\n      data.__proto__ = arrMethods\r\n      this.observeArr(data)\r\n    }else {\r\n      this.walk(data)\r\n    }\r\n  }\r\n  walk(data){\r\n    const keys = Object.keys(data)\r\n    for(let key of keys){\r\n      defineReactive(data, key, data[key])\r\n    }\r\n  }\r\n  observeArr(arr){\r\n    for (let item of arr){\r\n      observe(item)\r\n    }\r\n  }\r\n}\r\n\r\nfunction defineReactive(target, key, value){\r\n  observe(value)\r\n  Object.defineProperty(target, key, {\r\n    get(){\r\n      console.log(`数据获取${key} value: ${value}`)\r\n      return value\r\n    },\r\n    set(newValue){\r\n      if(newValue === value) return\r\n      console.log(`数据设置${key} value: ${newValue}`)\r\n      observe(newValue)\r\n      value = newValue\r\n    }\r\n  })\r\n}\r\n\r\nexport function observe(data){\r\n  if (!isObject(data) || data.__ob__) return data\r\n  new Observer(data)\r\n}","import {proxy} from \"./utils\";\r\nimport {observe} from \"./observer\";\r\n\r\nexport function initState(vm){\r\n  const options = vm.$options;\r\n  if(options.data){\r\n    initData(vm)\r\n  }\r\n}\r\nfunction initData(vm){\r\n  let data = vm.$options.data;\r\n  vm._data = data = typeof data === 'function' ? data.call(vm) : data\r\n\r\n  for (let key in data){\r\n    if(Object.hasOwn(data, key)){\r\n      proxy(vm, '_data', key)\r\n    }\r\n  }\r\n  observe(data)\r\n}","// id=\"app\" id='app' id=app\r\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/;\r\n//标签名  <my-header></my-header>\r\nconst ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`;\r\n// <my:header></my:header>\r\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`;\r\n// <div\r\nconst startTagOpen = new RegExp(`^<${qnameCapture}`);\r\n// > />\r\nconst startTagClose = /^\\s*(\\/?)>/;\r\n// </div>\r\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`);\r\n\r\n\r\n/**\r\n * text 文本信息\r\n * root 根节点\r\n * currentParent 父元素节点\r\n * stack 存储待处理的节点信息\r\n * 拿到html字符串\r\n * 判断字符串的<号是否在第0位\r\n * 0；是以<开始，可能是开始标签，也可能是结束标签\r\n *    开始标签： 正则匹配是开始标签，匹配成功。\r\n *             创建开始标签信息\r\n *             检查root是否为空，如果是空，将节点信息赋值给root\r\n *             循环提取标签属性信息\r\n *             返回元素节点信息\r\n *             将元素节点信息push到stack中保存\r\n *             continue进入下一次循环\r\n *    结束标签：将stack之后一个节点信息移出，\r\n *            设置移出的节点信息的parent为移出后stack的最后一项的节点\r\n *            移除的节点并添加到移出后stack的最后一项的节点children内\r\n *            continue进入下一次循环\r\n *!0：文本内容：提取文本内容。0~<好的位置\r\n *    得到文本内容，创建文本节点信息\r\n *    将节点信息添加到currentParent的children内\r\n */\r\n\r\nexport function parseHtmlToAst(html){\r\n  let text,\r\n      root,\r\n      currentParent,\r\n      stack = [];\r\n\r\n  while (html){\r\n    let textEnd = html.indexOf('<')\r\n    if(textEnd === 0){\r\n      const startTagMatch = parseStartTag()\r\n      if(startTagMatch){\r\n        start(startTagMatch.tagName, startTagMatch.attrs)\r\n        continue\r\n      }\r\n      // 匹配结束标签\r\n      const endTagMatch = html.match(endTag)\r\n      if(endTagMatch){\r\n        advance(endTagMatch[0].length)\r\n        end(endTagMatch[1])\r\n        continue\r\n      }\r\n    }\r\n\r\n    if(textEnd > 0){\r\n      text = html.substring(0, textEnd)\r\n    }\r\n    if(text){\r\n      advance(text.length);\r\n      chars(text)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 提取开始标签的信息及标签属性\r\n   * <div id=\"app\" v-if=”show“ style=\"width: 100%\">\r\n   * 返回信息格式： {\r\n   *     tag: 'div',\r\n   *     attrs: [\r\n   *        { name: 'id', value: 'app' },\r\n   *        { name: 'v-if', value: 'show' },\r\n   *        { name: 'style', value: 'width: 100%' },\r\n   *     ]\r\n   * }\r\n   */\r\n  function parseStartTag(){\r\n    // 匹配开始标签\r\n    const start = html.match(startTagOpen)\r\n    let end,\r\n        attr;\r\n    // 开始标签是否存在\r\n    if(start){\r\n      // 保存标签名称\r\n      const match = {\r\n        tagName: start[1],\r\n        attrs: [],\r\n      }\r\n      // 删除已匹配的标签字符\r\n      advance(start[0].length)\r\n      // 开始获取标签的属性\r\n      while (!(end = html.match(startTagClose)) && (attr = html.match(attribute))) {\r\n        match.attrs.push({\r\n          name: attr[1],\r\n          value: attr[3] || attr[4] || attr[5],\r\n        })\r\n        // 删除已匹配的标签属性\r\n        advance(attr[0].length)\r\n      }\r\n      // 匹配到了结束>符合，返回信息\r\n      if(end){\r\n        advance(end[0].length)\r\n        return match\r\n      }\r\n    }\r\n  }\r\n\r\n  function advance(n){\r\n    html = html.substring(n)\r\n  }\r\n\r\n  // 创建开始标签节点信息，并将节点添加到stack中\r\n  function start(tagName, attrs){\r\n    const element = createASTElement(tagName, attrs)\r\n    if(!root){\r\n      root = element\r\n    }\r\n    currentParent = element\r\n    stack.push(element)\r\n  }\r\n\r\n  // 结束标签\r\n  function end(tagName){\r\n    const element = stack.pop();\r\n    // 更新当前元素的parent\r\n    currentParent = stack[stack.length - 1];\r\n    if(currentParent){\r\n      // 设置取出元素的父亲\r\n      element.parent = currentParent\r\n      // 元素添加父级的children\r\n      currentParent.children.push(element)\r\n    }\r\n  }\r\n\r\n  // 文本信息\r\n  function chars(text){\r\n    text = text.trim()\r\n    if(text){\r\n      currentParent.children.push({\r\n        type: 3,\r\n        text,\r\n      })\r\n    }\r\n  }\r\n\r\n  // 创建节点信息\r\n  function createASTElement(tagName, attrs){\r\n    return {\r\n      tag: tagName,\r\n      type: 1,\r\n      attrs,\r\n      children: [],\r\n      parent: null,\r\n    }\r\n  }\r\n\r\n  return root\r\n}","import {parseHtmlToAst} from \"./astParser\";\r\n\r\nexport function compilerToRenderFunction(html){\r\n  const ast = parseHtmlToAst(html);\r\n  console.log(ast)\r\n  return ast;\r\n}","import {initState} from \"./state\";\r\nimport { compilerToRenderFunction } from \"./compiler\";\r\n\r\nexport function initMixin(Vue){\r\n  Vue.prototype._init = function (options){\r\n    const vm = this\r\n    vm.$options = options\r\n    if(vm.$options.el){\r\n      vm.$mount(vm.$options.el)\r\n    }\r\n    initState(vm)\r\n  }\r\n  Vue.prototype.$mount = function (el){\r\n    const vm = this,\r\n          options = vm.$options;\r\n    vm.$el = document.querySelector(el);\r\n    if(!options.render){\r\n      let template = options.template;\r\n      if(!template && el){\r\n        template = vm.$el.outerHTML;\r\n      }\r\n      const render = compilerToRenderFunction(template);\r\n      options.render = render;\r\n    }\r\n  }\r\n}","import {initMixin} from \"./init\";\r\n\r\nfunction Vue(options){\r\n  this._init(options)\r\n}\r\ninitMixin(Vue)\r\nexport default Vue"],"names":["defineReactive","target","key","value","observe","Object","defineProperty","get","console","log","set","val","observeArray","arr","item","Observer","data","Array","isArray","__proto__","arrMethods","walk","prototype","hasOwn","arrPrototype","create","arrProto","map","m","args","slice","call","arguments","rt","apply","newArr","proxy","sourceKey","setConstantProperty","enumerable","configurable","isObject","arrProtoMethods","result","ob","__ob__","observeArr","constructor","keys","newValue","initState","vm","options","$options","initData","_data","attribute","ncname","qnameCapture","startTagOpen","RegExp","startTagClose","endTag","parseHtmlToAst","html","text","root","currentParent","stack","textEnd","indexOf","startTagMatch","parseStartTag","start","tagName","attrs","endTagMatch","match","advance","length","end","substring","chars","attr","push","name","n","element","createASTElement","pop","parent","children","trim","type","tag","compilerToRenderFunction","ast","initMixin","Vue","_init","el","$mount","$el","document","querySelector","render","template","outerHTML"],"mappings":"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"}